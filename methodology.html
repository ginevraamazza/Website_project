<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project KE4H: Methodology</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  
 <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="methodology.html">Methodology</a></li>
      <li><a href="sparqlqueries.html">SPARQL Queries</a></li>
      <li>
        <a href="#">Monuments</a>
        <ul>
          <li><a href="arcodaugusto.html">Arco d'Augusto</a></li>
          <li><a href="tempiomalatestiano.html">Tempio Malatestiano</a></li>
          <li><a href="domusdelchirurgo.html">Domus del Chirurgo</a></li>
          <li><a href="ponteditiberio.html">Ponte di Tiberio</a></li>
          <li><a href="chiesadisantagostino.html">Chiesa di Sant'Agostino</a></li>
        </ul>
      </li>
      <li><a href="facedchallenges.html">Faced Challenges</a></li>
      <li><a href="conclusions.html">Conclusions</a></li>
    </ul>
 </nav>

  <main>
    <br>
    <br>
    <h1 id="arch-title" class="anchor-offset">Methodology</h1>
    <br>
    <div class="internal-nav">
  <div class="nav-title">Go directly to:</div>
  <ol> 
	<li><a href="#why-wikidata">Why Wikidata?</a></li>
    <li><a href="#tools-used">Tools used</a></li>
  </ol>
 </div>
  <div class="internal-nav">
  <div class="nav-title">The objectives are:</div>
  <ol> 
	<li><a href="#queries">Using queries to investigate the KG</a></li>
    <li><a href="#use-of-llms">Using LLMs to enrich the KG</a></li>
	<li><a href="#construct">The construction of new triples</a></li>
  </ol>
</div>
    <br>
	  <h2 id="why-wikidata" class="anchor-offset">&#128200 Why Wikidata?</h2>
    <br>
    <p> <strong><a href="https://www.wikidata.org/wiki/Wikidata:Main_Page" class="no-underline-link"</a> Wikidata</a></strong>, a massive knowledge graph, was chosen due to its openness, semantic structure, and active community of contributors. 
	As a central hub in the Linked Open Data cloud, Wikidata offers a well-established <strong><a href="https://www.wikidata.org/wiki/Wikidata:WikiProject_Ontology" class="no-underline-link"</a> ontology</a></strong>, multilingual support, and the ability to integrate new data using standard <strong><a href="https://en.wikipedia.org/wiki/Resource_Description_Framework" class="no-underline-link"</a> RDF</a></strong> and <strong><a href="https://en.wikipedia.org/wiki/SPARQL" class="no-underline-link"</a> SPARQL</a></strong> formats. 
	<br><br>One of the major advantages of the Wikidata ontology is its accessibility even to non-experts. Its predicate structure (e.g., <span class="query-keyword">wd:</span>, <span class="query-keyword">wdt:</span>, <span class="query-keyword">ps:</span>, and <span class="query-keyword">pq:</span>) is intuitive and allows contributors to model knowledge with varying levels of complexity.
    Its ontology supports not only simple statements (using <span class="query-keyword">wdt:</span> predicates) but also more precise knowledge representation. By using <span class="query-keyword">ps:</span> (main statement), and <span class="query-keyword">pq:</span> (qualifier) prefixes, 
	we were able to add additional qualifiers to the triples, such as specific features of the monuments, thereby enhancing the precision and expressivity of the data.</p>
	<hr class="section-divider">
    <h2 id="tools-used" class="anchor-offset">&#128295 Tools used</h2>
    <br>
    <p>For this project, a combination of <strong><a href="https://www.wikidata.org/wiki/Semantic_Web" class="no-underline-link"</a>semantic web</a></strong> and  <strong><a href="https://www.wikidata.org/wiki/Artificial_intelligence" class="no-underline-link"</a>AI</a></strong> tools were employed:
	<br>
	<br>
	- The Wikidata ontology served as the foundational schema for understanding the structure and semantics of the knowledge graph, therefore Wikidata SPARQL was used as the main query language to retrieve and manipulate data from Wikidata and we used <strong><a href="https://query.wikidata.org" class="no-underline-link"</a>Wikidata query service</a></strong> as the platform to execute our queries. 
	<br>
	<br>
	- <strong><a href="https://en.wikipedia.org/wiki/Large_language_model" class="no-underline-link"> Large Language Models</a></strong> (LLMs) including <strong><a href="https://chatgpt.com/auth/login" class="no-underline-link"</a>Chat GPT</a></strong>, <strong><a href="https://www.deepseek.com/en" class="no-underline-link"</a>Deep Seek</a></strong> and <strong><a href="https://gemini.google.com/app?hl=itGemini" class="no-underline-link"</a>Gemini</a></strong> were integrated into the workflow to both assist in query construction and generate enriched knowledge in natural language. 
	<br>
	<br>
	- <strong><a href="https://en.wikipedia.org/wiki/Notepad%2B%2B" class="no-underline-link"</a>Notepad++</a></strong> was used for manual <strong><a href="https://en.wikipedia.org/wiki/HTML" class="no-underline-link"</a>HTML</a></strong> and code editing during website development while 
	<strong><a href="https://en.wikipedia.org/wiki/Windows_Notepad" class="no-underline-link"</a>Notepad</a></strong> was frequently used to modify URLs from query results before embedding them into the HTML code. This was because these URLs often contained symbols that are not acceptable in HTML without proper encoding. Notepad's simplicity made it a quick tool for finding and replacing these characters.
	<br>
	<br>
	- To publish our website we used <strong><a href="https://github.com" class="no-underline-link"</a>Github</a></strong>, a web-based platform that uses Git (a distributed version control system) to help developers store, manage, and collaborate on their code.
	Although using GitHub <strong><a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template" class="no-underline-link"</a>templates</a></strong> was initially considered, we opted to build the website from scratch to allow for greater flexibility and customization.</p>
	<hr class="section-divider">
    <h2 id="queries" class="anchor-offset">&#128269 Queries</h2>
    <br>
    <p>Our process began with SPARQL queries crafted to explore the knowledge graph (KG) and uncover missing data. 
	<br>
	<br>
	To simplify query writing and improve readability, we used <strong class="highlighted-strong">PREFIX</strong> declarations at the start of each query.
	<br>
	<br>
	We used a variety of SPARQL constructs including <strong class="highlighted-strong">DESCRIBE</strong>, <strong class="highlighted-strong">SELECT</strong>, <strong class="highlighted-strong">WHERE</strong>, <strong class="highlighted-strong">DISTINCT</strong>,
	<strong class="highlighted-strong">VALUES</strong>, <strong class="highlighted-strong">OPTIONAL</strong>, <strong class="highlighted-strong">UNION</strong>, <strong class="highlighted-strong">FILTER</strong>,
	 <strong class="highlighted-strong">REGEX</strong>, <strong class="highlighted-strong">LIMIT</strong>, <strong class="highlighted-strong">SERVICE</strong> and <strong class="highlighted-strong">ORDER BY</strong>. 
	These queries helped extract existing information and identify inconsistencies or gaps.
	<br>
	<br>
	Here is an example taken from the page <strong><a href="sparqlqueries.html#arch-title" class="no-underline-link">SPARQL queries</a></strong>:
	   <br>
	<pre class="code-frame" style="max-width: 900px;"><code>	
<strong>PREFIX</strong> rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
<strong>PREFIX</strong> wd: &lt;http://www.wikidata.org/entity/&gt;
<strong>PREFIX</strong> wdt: &lt;http://www.wikidata.org/prop/direct/&gt;
<br>
<strong>SELECT</strong> <strong>DISTINCT</strong> *
<strong>WHERE</strong> {
   <strong>VALUES</strong> ?monuments
   { wd:Q1072853 wd:Q3672313 wd:Q2063557 wd:Q3713399 wd:Q948080 wd:Q1268593 }
  ?monuments rdfs:label ?monument_name .
  { ?monuments wdt:P1435 wd:Q26971668 . }  # we add this “condition” because if an entity has 
					     none of the following properties, then it would
                                             not appear in the results. 
  <strong>UNION</strong>
  { ?monuments wdt:P571 ?inauguration_date . }
  <strong>UNION</strong>
  { ?monuments wdt:P186 ?constrmaterial . }
  <strong>UNION</strong>
  { ?monuments wdt:P149 ?archstyle . }
  <strong>UNION</strong>
  { ?monuments wdt:P138 ?namedafter . }
  SERVICE wikibase:label { bd:serviceParam wikibase:language "it". }
  FILTER (lang(?monument_name) = "it")
}
<strong>ORDER BY</strong> ?monument_name
    </code></pre>
	<br>
	<p> &#x1F517 Let's see the results: </p>
	<iframe style="width: 95vw; height: 70vh; border: none;" src="https://query.wikidata.org/embed.html#PREFIX%20rdfs%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0APREFIX%20wd%3A%20%3Chttp%3A%2F%2Fwww.wikidata.org%2Fentity%2F%3E%0APREFIX%20wdt%3A%20%3Chttp%3A%2F%2Fwww.wikidata.org%2Fprop%2Fdirect%2F%3E%0ASELECT%20DISTINCT%20*%0AWHERE%20%7B%0A%20%20%20VALUES%20%3Fmonuments%0A%20%20%20%7B%20wd%3AQ1072853%20wd%3AQ3672313%20wd%3AQ2063557%20wd%3AQ3713399%20wd%3AQ1268593%20%7D%0A%20%20%3Fmonuments%20rdfs%3Alabel%20%3Fmonument_name%20.%0A%20%20%7B%20%3Fmonuments%20wdt%3AP1435%20wd%3AQ26971668%20.%20%7D%20%20%23%20we%20add%20this%20%E2%80%9Ccondition%E2%80%9D%20because%20if%20an%20entity%20has%20%0A%09%09%09%09%09%20%20%20%20%20%0A%20%20UNION%0A%20%20%7B%20%3Fmonuments%20wdt%3AP571%20%3Finauguration_date%20.%20%7D%0A%20%20UNION%0A%20%20%7B%20%3Fmonuments%20wdt%3AP186%20%3Fconstrmaterial%20.%20%7D%0A%20%20UNION%0A%20%20%7B%20%3Fmonuments%20wdt%3AP149%20%3Farchstyle%20.%20%7D%0A%20%20UNION%0A%20%20%7B%20%3Fmonuments%20wdt%3AP138%20%3Fnamedafter%20.%20%7D%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22it%22.%20%7D%0A%20%20FILTER%20(lang(%3Fmonument_name)%20%3D%20%22it%22)%0A%7D%0AORDER%20BY%20%3Fmonument_name" referrerpolicy="origin" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
    <br>
	<br>
	<p> This revealed for example that the Arch of Augustus was lacking all the properties investigated execpt for the eponym, while the Malatestan Temple already had a few. <br><br><strong>!!IMPORTANT!!</strong> This affirmation was made when we started our project at half of May. On the 14th June 2025, Clemens Dulcis decided to enrich the 
	entity of the Arch by putting the eponym!! In the photo below there is the <strong><a href="https://www.wikidata.org/w/index.php?title=Q1072853&action=history" class="no-underline-link"</a>revision history</a></strong> of the entity of the Arch hat shows the latest modifications to the entity.</p>
	<div style="text-align: center;">
 <img src="images/photohistory.jpg" width="700">
</div>
<br>
<p>Clearly, the investigation on the Arch of Augustus in our project makes reference to the state of things before the 14th June 2025.</p>
    <hr class="section-divider">
    <h2 id="use-of-llms" class="anchor-offset">&#129302 Use of LLMS</h2>
    <br>
    <p>LLMs were often asked to assist in building complex queries and were particularly useful when using advanced constructs like nested <strong class="highlighted-strong">OPTIONAL</strong>s or <strong class="highlighted-strong">UNION</strong> patterns.
	The chatbots were fundamental also for enriching the knowledge graph. 
	They provided valuable assistance, helping in the building of the necessary <strong class="highlighted-strong">CONSTRUCT</strong> queries that allowed us to populate the graph with new information.
	Each LLM (ChatGPT, Deep Seek and Gemini) received prompts in different formats and produced various responses, some correct, some incorrect that needed human revision.<br><br>
	We used four prompting techniques while enriching the five monuments, here examplained in a table with a few examples taken from the different pages:</p>
	<div class="table-container">
    <table class="prompting-style-table">
  <thead>
    <tr>
      <th>Prompting Style</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Zero-shot</td>
      <td style="font-size: 1.1em;">"Can you tell me the inauguration date, the construction materials, the architectural style, the inscription, <br> and after whom the Arch of Augustus in Rimini was named? Thank you!"</td>
    </tr>
	<td>One-shot</td>
	<td style="text-align: left;">
	<span style="font-size: 1.3em;"> "Hi! I'm looking to retrieve all the artworks located in the Malatesta Temple from Wikidata. Could you help me write a SPARQL query for that?  <br><br>
	For reference, here's an example of a similar query in ArCo knowledge graph, the main difference is that I am interested in artworks connected to a specific location rather than to a specific author.</span> <br><br>
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;<br>
PREFIX arco: &lt;https://w3id.org/arco/ontology/arco/&gt;<br>
PREFIX a-cd: &lt;https://w3id.org/arco/ontology/context-description/&gt; <br>
PREFIX agent: &lt;https://w3id.org/arco/resource/Agent/&gt; <br>
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; <br>
<br>
SELECT * WHERE {<br>
?culturalProperty a arco:HistoricOrArtisticProperty;<br>
                          a-cd:hasAuthor agent:50f36ef3d01e9761a295106ebbd39de3;<br>
                          cis:involvesCulturalEntity ?culturalEntity .<br>
                          rdfs:label ?label<br>
OPTIONAL { ?culturalProperty a-cd:depiction ?depiction } }"<br>
    <tr>
	</td>
	
	
      <td>Few-shots</td>
      <td style="text-align: left;"> 
	<span style="font-size: 1.3em;"> 
	  "Hi, I need to enrich the entity wd:Q1072853 (Arch of Augustus in Rimini) in the Wikidata knowledge graph with some new triples. I noticed that in the page various things are missing such as: <br>
<br>- the inauguration date;<br>
- the eponym;<br>
- the architectural style;<br>
- the material;<br>
- the website;<br>
- the inscription on the arc.<br>
<br>
Can you create a CONSTRUCT query for Wikidata with all this information, following these examples taken from some queries made to the ArCo knowledge graph?: </span>
<br><br>
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; <br>
PREFIX clv: &lt;https://w3id.org/italia/onto/CLV/&gt; <br>
PREFIX cis: &lt;http://dati.beniculturali.it/cis/&gt;<br>
PREFIX a-cd: &lt;https://w3id.org/arco/ontology/context-description/&gt;<br>
PREFIX l0: &lt;https://w3id.org/italia/onto/l0/&gt;<br>
<br>
CONSTRUCT {<br>
     ?place a cis:GeographicalFeature; l0:name "Firenze" .<br>
     ?event a cis:CulturalEvent; clv:hasSpatialCoverage ?place; l0:name ?eventName;<br>
            cis:involvesCulturalEntity ?culturalProperty .<br>
     ?culturalProperty a-cd:hasAuthor ?author; l0:name ?title .<br>
     ?author l0:name ?authorName<br>
}<br>
WHERE {<br>
    ?place a cis:GeographicalFeature; rdfs:label "Firenze" .<br>
    ?event a cis:CulturalEvent; clv:hasSpatialCoverage ?place; rdfs:label ?eventName;<br>
           cis:involvesCulturalEntity ?culturalProperty .<br>
    ?culturalProperty a-cd:hasAuthor ?author; rdfs:label ?title .<br>
    ?author rdfs:label ?authorName<br>
FILTER(REGEX(?authorName, "andrea del Castagno", "i"))<br>
}<br>
<br>
PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;<br>
PREFIX clv: &lt;https://w3id.org/italia/onto/CLV/&gt;<br>
PREFIX cis: &lt;http://dati.beniculturali.it/cis/&gt;<br>
PREFIX a-cd: &lt;https://w3id.org/arco/ontology/context-description/&gt;<br>
PREFIX l0: &lt;https://w3id.org/italia/onto/l0/&gt;<br>
<br>
CONSTRUCT {<br>
     ?author cis:exhibitedAt ?event .<br>
}<br>
WHERE {<br>
     ?event a cis:CulturalEvent;<br>
            cis:involvesCulturalEntity ?culturalProperty .<br>
     ?culturalProperty a arco:HistoricOrArtisticProperty;<br>
                       a-cd:hasAuthor ?author;<br>
                       rdfs:label ?title .<br>
     ?author rdfs:label ?authorName .<br>
FILTER(REGEX(?authorName, "andrea del Castagno", "i"))<br>
}"<br>
<br></td>
    </tr>
    <tr>
      <td>Chain-of-Thought</td>
      <td style="text-align: left;"><span style="font-size: 1.3em;"><strong>This example is a Zero-shot Chain-of-Thought</strong>:<br><br>
	  "Hi, I need to enrich the entity wd:Q1268593 (Tempio Malatestiano) in the Wikidata knowledge graph with some new triples. I noticed that in the page various things are missing such as: <br><br>
- the material, which is Pietra d'Istria (Q1401767); <br>
- the use, which is structure of worship (Q1370598), mausoleum (Q162875)), tourist attraction (Q570116); <br>
- the artworks that are part of the temple such as: Crocifisso di Rimini (Q3005517), Monumento funebre di Sigismondo Pandolfo Malatesta (Q117745501), Sigismondo Pandolfo Malatesta in preghiera davanti a san Sigismondo (Q3960322) ; <br>
- the significant event, which corresponds to a property damage (Q554774) occurred during WW2, in particular in 1944 . <br>
<br>
Can you create a CONSTRUCT query for Wikidata with all this information? Let's think STEP-BY-STEP!"</span></td>
    </tr>
  </tbody>
</table>
</div>
<br><br>
<p>It is important to highlight that Large Language Models also significantly sped up the website development process by providing precise <strong><a href="https://en.wikipedia.org/wiki/CSS" class="no-underline-link"> CSS</a></strong> and inline styling advice, ensuring the site was formatted exactly as envisioned. 
<br><br>Here is an example of an answer by Gemini, helping with the construction of a table.</p>
	<div style="text-align: center;">
  <img src="images/llms.jpg" width="700">
</div>
<br>
<p> They always provided useful advice, but their suggestions occasionally contained errors or needed refinement, necessitating careful review and adaptation to fit our specific codebase, yet they consistently offered an excellent starting point.</p>
    <hr class="section-divider">
    <h2 id="construct" class="anchor-offset">&#127942 Construction of new potential triples</h2>
    <br><br>
    <p>It is evident from the prompts provided to chatbots that LLMs were tasked with generating RDF triples using the Wikidata ontology. <br><br>
	Their outputs were then: <br>
    - Corrected manually (they contained invalid Q-IDs);<br>
    - Compared between models.<br>
Each page presents the final <strong class="highlighted-strong">CONSTRUCT</strong> query manually corrected with the right subjects, predicate and objects, and the table with the final triples in Turtle format taken directly from Wikidata.
<br><br>
Here is an example taken from the page of the Domus del Chirurgo:</p>
<iframe style="width: 95vw; height: 40vh; border: none;" src="https://query.wikidata.org/embed.html#PREFIX%20wd%3A%20%3Chttp%3A%2F%2Fwww.wikidata.org%2Fentity%2F%3E%0APREFIX%20wdt%3A%20%3Chttp%3A%2F%2Fwww.wikidata.org%2Fprop%2Fdirect%2F%3E%0APREFIX%20xsd%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%3E%0A%0ACONSTRUCT%20%7B%0A%20%20%3Fmonument%20wdt%3AP1619%20%3FopeningDate%20.%0A%20%20%3Fmonument%20wdt%3AP366%20%3Fuse%20.%0A%20%20%3Fmonument%20wdt%3AP31%20%3Finstance%20.%0A%20%20%3Fmonument%20wdt%3AP527%20%3FpartOf%20.%0A%7D%0AWHERE%20%7B%0A%20%20BIND(wd%3AQ3713399%20AS%20%3Fmonument)%0A%20%20BIND(%222007%22%5E%5Exsd%3AgYear%20AS%20%3FopeningDate)%0A%20%20BIND(wd%3AQ570116%20AS%20%3Fuse)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20BIND(wd%3AQ133444874%20AS%20%3Finstance)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20BIND(%22Cucchiaio%20di%20Diocle%22%20AS%20%3FpartOf)%0A%7D" referrerpolicy="origin" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
<br>
  </main>
<div class="internal-nav-1">
  <p><a href="#arch-title" class="no-underline-link">Get back at the beginning of the page</a></p>
</div> 
<div id="footer_wrap">
 <footer class="inner">
        <p style="color: white; font-size: 1.1em;">Website published with <a href="https://pages.github.com" class="no-underline-link github-pages-link-hover" style="color: white;"> GitHub Pages</a></p>
      </footer>
    </div>
</body>
</html>
</body>
</html>
